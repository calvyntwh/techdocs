# Contract deployment call

## 1. Example contract

- The contract Test.solidity source code is as follows:

```shell
pragma solidity ^0.4.25;

        contract Test {
        function senders() public view returns (address){
            return (msg.sender);
        }
        function data(address _data) public pure returns(address){
            return _data;
        }
        function addmods(uint a,uint b,uint c) public pure returns(uint){
            uint num = addmod(a,b,c);
            return num;
        }
        function FFF(uint a,uint32[] b,bytes10 c,bytes d) public view returns (uint, uint32[], bytes10, bytes){
            return (a, b, c, d);
        }
        function sam(bytes a,bool b,uint256[] c) public view  returns (bytes ,bool ,uint256[] ){
            return (a,b,c);
        }
    }
```



## 2. BCC tool configuration

- Main chain configuration: According to the different ChainID, modify the defaultChainID field of the bcc.yaml file, and modify or add the corresponding IP address
- Example: ChainID = "devtest"

```shell
# default ChainID
defaultChainID: "devtest"

# blockchain nodes
urls: !!map
  bcb:
    - "https://earth.bcbchain.io"
    - "https://mars.bcbchain.io"
    - "https://venus.bcbchain.io"
    - "https://mercury.bcbchain.io"
    - "https://jupiter.bcbchain.io"
    - "https://saturn.bcbchain.io"

  bcbtest:
    - "https://tearth.bcbchain.io"
    - "https://tmars.bcbchain.io"
    - "https://tvenus.bcbchain.io"
    - "https://tmercury.bcbchain.io"
    - "https://tjupiter.bcbchain.io"
    - "https://tsaturn.bcbchain.io"

  local:
    - "http://localhost:46657"

  devtest:
    - "http://192.168.254.162:46657"
    - "http://192.168.254.163:46657"
    - "http://192.168.254.164:46657"
    - "http://192.168.254.161:46657"
```



## 3. Contract compilation

- Contract compilation with BCCToolBox tool or Remix editor译

- Compile by BCCToolBox

```shell
# Pragma 
# PS：-f The path to the source file
./bcc solDeploy -f ./Test.solidity -a devtest3FDYLwaFHeLdPB4FTMuABLRLg1sbVvdsC -n owner -p Ab1@Cd3$ -g 10000000 
```

- Compile via Remix editor

- For details, please refer to the contract development documents in the same directory.

  
  
- The content of the binary file Test.bin generated by the contract compilation is as follows:

```shell
608060405234801561001057600080fd5b50610591806100206000396000f30060806040526004361061006d576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806359c998af14610072578063a3f0ff20146100c7578063a5643bf21461011e578063b90d3d0c146102a2578063e5ccffb514610325575b600080fd5b34801561007e57600080fd5b506100b16004803603810190808035906020019092919080359060200190929190803590602001909291905050506104ff565b6040518082815260200191505060405180910390f35b3480156100d357600080fd5b506100dc61051c565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561012a57600080fd5b506101d4600480360381019080803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929080351515906020019092919080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509192919290505050610524565b60405180806020018415151515815260200180602001838103835286818151815260200191508051906020019080838360005b83811015610222578082015181840152602081019050610207565b50505050905090810190601f16801561024f5780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019060200280838360005b8381101561028b578082015181840152602081019050610270565b505050509050019550505050505060405180910390f35b3480156102ae57600080fd5b506102e3600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061053c565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561033157600080fd5b506103fc6004803603810190808035906020019092919080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509192919290803575ffffffffffffffffffffffffffffffffffffffffffff19169060200190929190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610546565b60405180858152602001806020018475ffffffffffffffffffffffffffffffffffffffffffff191675ffffffffffffffffffffffffffffffffffffffffffff1916815260200180602001838103835286818151815260200191508051906020019060200280838360005b83811015610481578082015181840152602081019050610466565b50505050905001838103825284818151815260200191508051906020019080838360005b838110156104c05780820151818401526020810190506104a5565b50505050905090810190601f1680156104ed5780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b6000808280151561050c57fe5b8486089050809150509392505050565b600033905090565b60606000606085858592509250925093509350939050565b6000819050919050565b60006060600060608787878793509350935093509450945094509490505600a165627a7a72305820b985fea3a900c621f153dac938b64ca13c5c531772bcbe92ea4bfb49be2cc4740029
```

- The contents of the binary file Test.abi generated by the contract compilation are as follows:

```shell
[
	{
		"constant": true,
		"inputs": [
			{
				"name": "a",
				"type": "uint256"
			},
			{
				"name": "b",
				"type": "uint256"
			},
			{
				"name": "c",
				"type": "uint256"
			}
		],
		"name": "addmods",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "pure",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "senders",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "a",
				"type": "bytes"
			},
			{
				"name": "b",
				"type": "bool"
			},
			{
				"name": "c",
				"type": "uint256[]"
			}
		],
		"name": "sam",
		"outputs": [
			{
				"name": "",
				"type": "bytes"
			},
			{
				"name": "",
				"type": "bool"
			},
			{
				"name": "",
				"type": "uint256[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "_data",
				"type": "address"
			}
		],
		"name": "data",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "pure",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "a",
				"type": "uint256"
			},
			{
				"name": "b",
				"type": "uint32[]"
			},
			{
				"name": "c",
				"type": "bytes10"
			},
			{
				"name": "d",
				"type": "bytes"
			}
		],
		"name": "FFF",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			},
			{
				"name": "",
				"type": "uint32[]"
			},
			{
				"name": "",
				"type": "bytes10"
			},
			{
				"name": "",
				"type": "bytes"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]
```



## 4. Contract deployment

- Contract deployment via BCCToolBox

```shell
# Deployment instructions
./bcc solDeploy -b ./Test.bin -a devtest3FDYLwaFHeLdPB4FTMuABLRLg1sbVvdsC -n owner -p Ab1@Cd3$ -g 10000000
```



## 5. Contract call

- Call the senders() method


```shell
./bcc solCall -n owner -p Ab1@Cd3$ -a devtestEDyJZ9GuuzpowMqPr7w7Cc3YTLz8H4bXN -m senders -i test.abi -g 100000
```



- Call the data(address) method

```shell
./bcc solCall -n owner -p Ab1@Cd3$ -a devtestEDyJZ9GuuzpowMqPr7w7Cc3YTLz8H4bXN -m data -i test.abi -r devtestNHjSW42A6pqN2mWS3B4kJVUSWubpCvQu6 -g 100000
```



- Call FFF(uint a,uint32[] b,bytes10 c,bytes d) method

```shell
./bcc solCall -n owner -p Ab1@Cd3$ -a devtestEDyJZ9GuuzpowMqPr7w7Cc3YTLz8H4bXN -m FFF -i test.abi -r 123 -r "[234]" -r "0xabbbc" -r "0xasdfaasdf" -g 100000
```



- Call sam(bytes a,bool b,uint256[] c) Method

```shell
./bcc solCall -n owner -p Ab1@Cd3$ -a devtestEDyJZ9GuuzpowMqPr7w7Cc3YTLz8H4bXN -m sam  -i test.abi -r  "0xasdfasd" -r true -r "[123,234]" -g 100000
```



- PS : The wallet account and parameter structure are modified according to the actual situation.
