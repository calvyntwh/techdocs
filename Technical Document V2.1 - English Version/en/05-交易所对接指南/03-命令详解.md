# bcbXwallet

​	bcbXwallet is a stand-alone command line program that provides a native call wrapper for the rpc interface. It is convenient for daily diagnosis and integration, and there is no need to construct a POST request.



## .1 Usage

The command runs in the following format:

```
Usage:
  bcbXwallet [command]

Available Commands:
  allBalance      get balance of all tokens for specific address
  balance         get balance of BCB token for specific address
  balanceOfToken  get balance of specific token for specific address
  block           get block info with height
  blockHeight     get current block height
  commitTx        commit transaction
  help            Help about any command
  nonce           get the next usable nonce for specific address
  transaction     get transaction info with txHash
  transfer        transfer token
  transferOffline offline pack and sign transfer transaction
  walletCreate    create wallet
  walletExport    export wallet
  walletImport    import wallet
  walletList      list wallet

Flags:
  -h, --help   help for bcbXwallet

Use "bcbXwallet [command] --help" for more information about a command.
```



## 2. Command details



### 2.1 walletCreate

- **command**

  ```
  bcbXwallet walletCreate --name hotwal001 --password aBig62_123 [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | name     |  String  | Wallet name, 1-40 characters long, only upper case, lower case, digits, @, _, - , . allowed. |
  | password |  String  | Password for wallet，8-20 characters long（Any ASCII characters allowed, must contain at least one lower case, one upper case, one number, and one non-alphanumeric character). |
  | url      |  String  | Wallet service address, optional, default local service. |

- **Output FAILED Example**

  ```
  {
    "code": -32603,
    "message": "Invalid parameters.",
    "data": ""
  }
  ```

  Note: all execution errors will share the same format, there will be no more details.

- **Output SUCCESS Example**

  ```
  {
    "walletAddr": "bcbES5d6kwoX4vMeNLENMee2Mnsf2KL9ZpWo",
    "accessKey": "ASwDbde7X6z7nnTo2NVLrXF7JXevxA9iPeiTjforkCCB"
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :------: | ------------------------------------------------------------ |
  | walletAddr | Address  | Wallet Address                                                   |
  | accessKey  |  String  | 	The wallet access key, which is randomly generated by the bcbXwallet_rpc service and used to encrypt the private key corresponding to the wallet. The key needs to be properly stored, as it can no longer be retrieved if lost. |



### 2.2 walletExport

- **command**

  ```
  bcbXwallet walletExport --name hotwal001 --password aBig62_123 --accessKey 2Rm..... --plainText true [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | --------- | :------: | ------------------------------------------------------------ |
  | name      |  String  | Wallet name |
  | password  |  String  | Password for wallet，8-20 characters long（Any ASCII characters allowed, must contain at least one lower case, one upper case, one number, and one non-alphanumeric character) |
  | accessKey |  String  | Access key |
  | plainText |   Bool   | Whether to export the wallet’s private key in plaintext. true - plaintext, false - encrypted private key. |
  | url       |  String  | Wallet service address, optional, default local service. |

- **Output SUCCESS Example**

  ```
  {
    "privateKey": "0xbf7cbe09d71a1bc…99b7abd8f8fd73cb4",
    "walletAddr": "bcbES5d6kwoX4vMeNLENMee2Mnsf2KL9ZpWo"
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :-------: | ------------------------------------------------------------ |
  | privateKey | HexString | Wallet’s private key, in plaintext or encrypted depending on the plainText parameter in the request, with 0x as the header. |
  | walletAddr |  Address  | Wallet address |



### 2.3 walletImport

- **command**

  ```
  bcbXwallet walletImport --name hotwal001 --privateKey 0xbf7a... --password aBig62
  _123 --accessKey 2Rm... --plainText true [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :-------: | ------------------------------------------------------------ |
  | name       |  String   | Transaction nName of wallet, 1-40 characters long, only upper case, lower case, digits, @, _, - , . allowed. |
  | privateKey | HexString | Wallet’s private key, with 0x as the header. |
  | password   |  String   | Name of wallet, 1-40 characters long, only upper case, lower case, digits, @, _, - , . allowed Password for wallet，8-20 characters long（Any ASCII characters allowed, must contain at least one lower case, one upper case, one number, and one non-alphanumeric character) |
  | accessKey  |  String   | Access key, optional if plainText is true |
  | plainText  |   Bool    | Indicates whether the privateKey is plain text, true for plain text, and false for encrypted |
  | url        |  String   | Wallet service address, optional, default local service. |

- **Output SUCCESS Example**

  ```
  {
    "walletAddr": "bcbES5d6kwoX4vMeNLENMee2Mnsf2KL9ZpWo",
    "accessKey": "ASwDbde7X6z7nnTo2NVLrXF7JXevxA9iPeiTjforkCCB"
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :------: | ------------------------------------------------------------ |
  | walletAddr | Address  | Wallet address |
  | accessKey  |  String  | The wallet access key, which is randomly generated by the bcbXwallet_rpc service and used to encrypt the private key corresponding to the wallet. The key needs to be properly stored, as it can no longer be retrieved if lost. |



### 2.4 walletList

- **command**

  ```
  bcbXwallet walletList --pageNum 1 [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | pageNum  |  Uint64  | Page Number |
  | url      |  string  | Wallet service address, optional, default local service. |

- **Output SUCCESS Example**

  ```
  {
    	"total": 2,
    	"walletList": [
        {
          "name": "hotwal001",
          "walletAddr": "bcbES5d6kwoX4vMeNLENMee2Mnsf2KL9ZpWo"
        },
        {
          "name": "hotwal002",
          "walletAddr": "bcbLvBTGZCrLG3AMuyjD7eSqwQnBrq6CHc59"
        }
      ]
    }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :------: | ------------------------------------------------------------ |
  | total      |   Int    | Total number of wallets |
  | name       |  String  | Wallet name |
  | walletAddr | Address  | Wallet address |



### 2.5 transfer

- **command**

  ```
  bcbXwallet transfer --name hotwal001 --accessKey  2Rm... --smcAddress bcbLVgb... 
  --gasLimit 600 [--note hello] --to bcbLocFJG5Q792eLQXhvNkG417kwiaaoPH5a --value 1500000000 [--url https://...]
  ```

- **Request Parameters**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :------: | ------------------------------------------------------------ |
  | name       |  string  | Wallet name |
  | accessKey  |  string  | Access Key |
  | smcAddress | Address  | SMC Address |
  | gasLimit   |  string  | Gas Limit |
  | note       |  string  | Transaction note (limit 256 char), optional |
  | to         | Address  | Address of recipient of transfer |
  | value      |  string  | Amount to be transferred (Unit: Cong) |
  | url        |  String  | Wallet service address, optional, default local service. |

- **Output SUCCESS Example**

  ```
  {
    "code": 200,
    "log": "Check tx succeed",
    "txHash": "0xA1C960B9D5DB633A6E45B45015A722A2C516B392F93C9BF41F5DAA1197030584"
    "height": 234389
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ------------------ | :-------: | ------------------------------------------------------------ |
  | &nbsp;&nbsp;code   |    Int    | Response code of the transaction request, 200 indicates success |
  | &nbsp;&nbsp;log    |  String   | Error message when response code is not 200 |
  | &nbsp;&nbsp;txHash | HexString | Transaction hash |
  | &nbsp;&nbsp;height |   Int64   | Block height of the transaction |



### 2.6 transferOffline

- **command**

  ```
  bcbXwallet transferOffline --name hotwal001 --accessKey  2Rm... --smcAddress bcbLVg
  b... --gasLimit 600 [--note hello] --nonce 1500 --to bcbLocF... --value 1500000000 [--url https://...]
  ```

- **Request Parameters**

  | **Parameter**   | **Type** | **Description** |
  | ---------- | :------: | ------------------------------------------------------------ |
  | name       |  String  | Wallet name |
  | accessKey  |  String  | Access Key |
  | smcAddress | Address  | SMC Address |
  | gasLimit   |  String  | Gas Limit |
  | note       |  String  | Transaction note (limit 256 char), optional |
  | nonce      |  String  | Transaction count value |
  | to         | Address  | Address of recipient of transfer |
  | value      |  String  | Amount to be transferred (Unit: Cong) |
  | url        |  String  | Wallet service address, optional, default local service.
 |

- **Output SUCCESS Example**

  ```
  {
    "tx": "bcb<tx>.v2.AetboYAmy2TEyUbsR731FTLDLyHE1MVKsSd4v7hS1jFnNkrtmGEVxVmWHR3jVSU
    ffxKgW7aPawnQaVrZ4gwMt6aogUAJjhvnukfPWnxmsybqDgdjgecjsXa94bamPqgPhTTZC9Szb.<1>.YT
    giA1gdDGi2L8iCryAn34dXVYKUEdmBxivyHbK57wKpBcX5KrKyn1vdmZTuKKZ7PotCjcbASbesv61VLE8
    H38TDiopHrs2eHG9z9iEDDyLcN7giLPCgFiLN9LPRiYZgxwpR95echr2bRPbijnKWj" 
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | -------------- | :------: | ------------------------------------------------------------ |
  | &nbsp;&nbsp;tx |  String  | Details of the created offline transaction. |



### 2.7 blockHeight

- **command**

  ```
  bcbXwallet blockHeight [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | url      |  String  | Wallet service address, optional, default local service. |

- **Output SUCCESS Example**

  ```
  {
      "lastBlock": 2500
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | --------- | :------: | ------------------------------------------------------------ |
  | lastBlock |  Int64   | Latest block height |



### 2.8 block

- **command**

  ```
  bcbXwallet block --height 68685 [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | height   |  int64   | Specify the block height. 0 returns the block information of the latest height. |
  | url      |  string  | Wallet service address, optional, default local service. |

- **Output SUCCESS Example**

  ```
  {
    "blockHeight": 68685,
    "blockHash": "0x206e6bcfd17e1a64390e61c69468faee5a11faea",
    "parentHash": "0x05d7d5ff4a6d9a83da4c5b6f5913959a667b3b7b",
    "chainID": "devtest",
    "validatorHash": "0xd0d9a92830046e4abe4959be18ad0d8440dd33af",
    "consensusHash": "0xf66ef1df8ba6dac7a1ecce40cc84e54a1cebc6a5",
    "blockTime": "2019-10-28 08:34:33.134876793 +0000 UTC",
    "blockSize": 1615,
    "proposerAddress": "devtest4JjGSRE7QpWHgixhDTodsih1joE9uHN16",
    "txs": [
      {
        "txHash": "0xc8dbcfbe10fc7e935c2a29dd3aeb8ca08042a654332389d157f347a98231338e",
        "txTime": "2019-10-28 08:34:33.134876793 +0000 UTC",
        "code": 200,
        "log": "",
        "blockHash": "0x206e6bcfd17e1a64390e61c69468faee5a11faea",
        "blockHeight": 68685,
        "from": "devtestQ4suFdGVB4AbDnNLJ2xP9RXmqro6XtQXX",
        "nonce": 49,
        "gasLimit": 1000000,
        "fee": 1250000,
        "note": "transfer",
        "messages": [
          {
            "smcAddress": "devtestLL6sMXu8s2hhFRoZH67Q8fig9djogVi3H",
            "smcName": "token-basic",
            "method": "Transfer(types.Address,bn.Number)",
            "to": "devtestP4qDrEyBZegP5whAMmB1yy3c36HVCAWc",
            "value": "1000000000"
          }
        ],
        "transferReceipts": [
          {
            "token": "devtestLL6sMXu8s2hhFRoZH67Q8fig9djogVi3H",
            "from": "devtestQ4suFdGVB4AbDnNLJ2xP9RXmqro6XtQXX",
            "to": "devtestP4qDrEyBZegP5whAMmB1yy3c36HVCAWc",
            "value": 1000000000,
            "note": "transfer"
          }
        ]
      }
    ]
  }
  ```

- **Output SUCCESS Result**

| **Parameter**   | **Type** | **Description** |
| ----------------- | ------------ | ----------------------------------------------------- |
| blockHeight       | Int64        | Block height                                            |
| blockHash         | HexString    | Block hash, beginning with 0x                              |
| parentHash        | HexString    | Parent block hash, beginning with 0x                            |
| chainID           | String       | Chain ID                                                |
| validatorsHash    | HexString    | Validators hash, beginning with 0x                         |
| consensusHash     | HexString    | Consensus hash, beginning with 0x                          |
| blockTime         | String       | Block Time                                       |
| blockSize         | Int          | Block Size                                       |
| proposerAddress   | Address      | Proposer Address                                         |
| txs [             | Object Array | List of transactions                                            |
| {                 | Object       | Transaction parameters                                            |
| txHash            | HexString    | Transaction Hash, beginning with 0x                                |
| txTime            | String       | Transaction Time                                           |
| code              | Uint32       | Transaction response code, 200 means success, anything else means failure         |
| log               | String       | Description of transaction result                                        |
| blockHash         | HexString    | Block hash, beginning with 0x                      |
| blockHeight       | Int64        | Block height                                    |
| from              | Address      | Address of the transaction from party                                      |
| nonce             | Uint64       | Nonce value of the transaction                                |
| gasLimit          | Uint64       | Gas Limit                                        |
| fee               | Uint64       | Transaction fee（Unit cong)                              |
| note              | string       | note                                                |
| messages [{       | Object Array | Message List                                            |
| smcAddress        | Address      | Smc Address                                            |
| smcName           | String       | Smc Name                                            |
| method            | String       | method                                            |
| to                | Address      | Destination address, valid only when the transaction is a BRC20 standard transfer     |
| value             | string       | Transaction total (unit: cong)，valid only when the transaction is a BRC20 standard transfer   |
| }]                |              |                                                       |
| transferReceipts[ | Object Array | 收据列表。                                            |
| {                 | Object       | 收据参数。                                            |
| token             | Address      | 代币地址                                              |
| from              | Address      | 交易签名人地址。                                      |
| to                | Address      | 转账目的账户地址，仅当交易是BRC20标准转账时有效。     |
| value             | bn.Number    | 转账金额（单位cong），仅当交易是BRC20标准转账时有效。 |
| note              | string       | 收据备注                                              |
| }                 |              |                                                       |
| ]                 |              |                                                       |



### 2.9 transaction

- **command**

  ```
  bcbXwallet transaction --txHash 0x4E456161... [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :-------: | ------------------------------------------------------------ |
  | txHash   | HexString | Transaction Hash, beginning with 0x                                 |
  | url      |  string   | Wallet service address, optional, default local service.                     |

- **Output SUCCESS Example**

  ```
  {
    "txHash": "0x4E456161A6580A1D34D86F1560DCFE6034F5E08FA31D7DCEBCCCC72A0DC73654",
    "txTime": "2018-12-27T14:26:19.251820644Z",
    "code": 200,
    "log": "Deliver tx succeed"
    "blockHash": "0x583E820E58D2FD00B1A7D66CDBB6B7C26B207925",
    "blockHeight": 2495461,
    "from": "bcbAkTDzHLf5udamub38GdepKe7nek66EHqY",
    "nonce": 117510,
    "gasLimit": 2500,
    "fee": 1500000,
    "note":"hello",
    "messages": [
      {
        "smcAddress": "bcbCsRXXMGkUJ8wRnrBUD7mQsMST4d53JRKJ",
        "smcName": "token-basic",
        "method": "Transfer(smc.Address,big.Int)smc.Error",
        "to": "bcbKuqW1qdsnD7mRsRooXMEkCBj2s9GLF9pn",
        "value": "683000000000"
      }
    ]
  }
  ```


- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ---------------------------------- | :----------: | ------------------------------------------------------------ |
  | txHash                             |  HexString   | Transaction Hash, beginning with 0x                                     |
  | txTime                             |    String    | Transaction time                                                   |
  | code                               |    Uint32    | Transaction response code, 200 means success, anything else means failure |
  | log                                |    String    | Description of the transaction result                                 |
  | blockHash                          |  HexString   | Block Hash, beginning with 0x                           |
  | blockHeight                        |    Int64     | 交易所在区块高度。                                           |
  | from                               |   Address    | 交易签名人地址。                                             |
  | nonce                              |    Uint64    | 交易签名人交易计数值。                                       |
  | gasLimit&nbsp;                     |    Uint64    | 最大燃料数量。                                               |
  | fee                                |    Uint64    | 交易手续费（单位cong）。                                     |
  | note                               |    String    | 备注。                                                       |
  | messages [                         | Object Array | 消息列表。                                                   |
  | &nbsp;&nbsp;{                      |    Object    | 消息参数                                                     |
  | &nbsp;&nbsp;&nbsp;&nbsp;smcAddress |   Address    | 合约地址。                                                   |
  | &nbsp;&nbsp;&nbsp;&nbsp;smcName    |    String    | 合约名称。                                                   |
  | &nbsp;&nbsp;&nbsp;&nbsp;method     |    String    | 方法原型。                                                   |
  | &nbsp;&nbsp;&nbsp;&nbsp;to         |   Address    | 转账目的账户地址，仅当交易是BRC20标准转账时有效。            |
  | &nbsp;&nbsp;&nbsp;&nbsp;value      |    String    | 转账金额（单位cong），仅当交易是BRC20标准转账时有效。        |
  | &nbsp;&nbsp;}                      |              |                                                              |
  | ]                                  |              |                                                              |



### 2.10 balance

- **command**

  ```
  bcbXwallet balance --address bcbAkTD... [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | address  | Address  | 账户地址。                                                   |
  | url      |  String  | 钱包服务地址，可选项，默认调用本地服务。                     |

- **Output SUCCESS Example**

  ```
  {
     "balance": "2500000000"
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | balance  |  String  | 账户余额（单位：Cong）。                                     |



### 2.11 balanceOfToken

- **command**

  ```
  bcbXwallet balanceOfToken --address bcbAkTD... --tokenAddress bcbCsRX... --tokenNa
  me XT [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | ------------ | :------: | ------------------------------------------------------------ |
  | address      | Address  | 账户地址。                                                   |
  | tokenAddress | Address  | 代币地址，与代币名称可以二选一，两个都有时必须一致。         |
  | tokenName    |  string  | 代币名称，与代币地址可以二选一，两个都有时必须一致。         |
  | url          |  string  | 钱包服务地址，可选项，默认调用本地服务。                     |

- **Output SUCCESS Example**

  ```
  {
     "balance": "2500000000"
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | balance  |  String  | 账户余额（单位：Cong）。                                     |



### 2.12 allBalance

- **command**

  ```
  bcbXwallet allBalance --address bcbAkTD... [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | address  | Address  | 账户地址。                                                   |
  | url      |  String  | 钱包服务地址，可选项，默认调用本地服务。                     |

- **Output SUCCESS Example**

  ```
  [
     {
        "tokenAddress": "bcbALw9SqmqUWVjkB1bJUQyCKfnxDPhuN5Ej"，
        "tokenName": "bcb"，
        "balance": "2500000000"
     },
     {
        "tokenAddress": "bcbLVgb3odTfKC9Y9GeFnNWL9wmR4pwWiqwe"，
        "tokenName": "XT"，
        "balance": "10000000",
     }
  ]
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ------------ | :------: | ------------------------------------------------------------ |
  | tokenAddress | Address  | 代币地址。                                                   |
  | tokenName    |  String  | 代币名称。                                                   |
  | balance      |  String  | 账户余额（单位：Cong）。                                     |



### 2.13 nonce

- **command**

  ```
  bcbXwallet nonce --address bcbAkTD... [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | address  | Address  | 账户地址。                                                   |
  | url      |  string  | 钱包服务地址，可选项，默认调用本地服务。                     |

- **Output SUCCESS Example**

  ```
  {
    "nonce": 5000
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | nonce    |  Uint64  | 指定地址在区块链上可用的下一个交易计数值。                   |



### 2.14 commitTx

- **command**

  ```
  bcbXwallet commitTx --tx "bcb<tx>.v2.AetboY... [--url https://...]"
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | tx       |  String  | 交易数据。                                                   |
  | url      |  string  | 钱包服务地址，可选项，默认调用本地服务。                     |

- **Output SUCCESS Example**

  ```
  {
     "code": 200,
     "log": "Deliver tx succeed",
     "txHash": "0xA1C960B9D5DB633A6E45B45015A722A2C516B392F93C9BF41F5DAA1197030584"
     "height": 234389
  }
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | ------------------ | :-------: | ------------------------------------------------------------ |
  | &nbsp;&nbsp;code   |    Int    | 交易校验/背书结果代码，200表示成功。                         |
  | &nbsp;&nbsp;log    |  String   | 对交易校验/背书结果进行的文字描述，当code不等于200时描述具体的错误信息。 |
  | &nbsp;&nbsp;txHash | HexString | 交易的哈希，以 0x 开头。                                     |
  | &nbsp;&nbsp;height |   Int64   | 交易在哪个高度的区块被确认。                                 |



### 2.15 version

- **command**

  ```
  bcbXwallet version [--url https://...]
  ```

- **Input Parameters**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | url      |  string  | 钱包服务地址，可选项，默认调用本地服务。                     |

- **Output SUCCESS Example**

  ```
  {
    "version": "1.0.7.9636"
  }
  
  ```

- **Output SUCCESS Result**

  | **Parameter**   | **Type** | **Description** |
  | -------- | :------: | ------------------------------------------------------------ |
  | version  |  string  | 当前程序版本号。                                             |




